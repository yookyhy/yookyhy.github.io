import{j as e,r as o,c as B,u as A,a as O,s as D}from"./index-mT-WyXZ5.js";import{P}from"./PageLayout-ErIk4jyE.js";function I({participants:r,userParticipation:u}){return r.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:["ì•„ì§ ìž…ì°° ì°¸ì—¬ìžê°€ ì—†ìŠµë‹ˆë‹¤.",e.jsx("br",{}),"ì²« ë²ˆì§¸ ìž…ì°°ìžê°€ ë˜ì–´ë³´ì„¸ìš”! ðŸš€"]}):e.jsxs("div",{children:[u&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"ë‚´ ìž…ì°° ë‚´ì—­"}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsxs("div",{children:["ðŸ’° ì œì•ˆê°€ê²©: ",u.offered_price,"ëª¨ë¨¼íŠ¸"]}),u.message&&e.jsxs("div",{children:["ðŸ’¬ ë©”ì‹œì§€: ",u.message]}),e.jsxs("div",{children:["ðŸ“… ìž…ì°°ì¼ì‹œ: ",new Date(u.created_at).toLocaleDateString("ko-KR",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["ðŸ™‹â€â™‚ï¸ ìž…ì°° ì°¸ì—¬ìž (",r.length,"ëª…)"]}),e.jsx("div",{className:"space-y-3",children:r.map((t,n)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["ì°¸ì—¬ìž #",n+1]}),e.jsxs("div",{className:"font-semibold text-gray-800",children:[t.offered_price,"ëª¨ë¨¼íŠ¸"]})]}),t.message&&e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["ðŸ’¬ ",t.message]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(t.created_at).toLocaleDateString("ko-KR",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},t.id))})]})]})}function R({isOpen:r,onClose:u,bid:t,participants:n,onSubmit:j}){const[i,_]=o.useState(""),[h,y]=o.useState(""),[f,b]=o.useState({}),[k,x]=o.useState(!1),p=()=>n.length===0?(t==null?void 0:t.start_price)||0:Math.max(...n.map(d=>d.offered_price),(t==null?void 0:t.start_price)||0),N=d=>{const m=parseInt(d),c=p();return!d||isNaN(m)||m<=0?"ìœ íš¨í•œ ëª¨ë¨¼íŠ¸ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.":(t==null?void 0:t.type)==="bidding"&&m<c?`í˜„ìž¬ ìµœê³  ìž…ì°°ê°€ í˜¹ì€ ì‹œìž‘ê°€(${c}ëª¨ë¨¼íŠ¸)ë³´ë‹¤ ë†’ì€ ê¸ˆì•¡ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.`:(t==null?void 0:t.type)==="reverse"&&m>c?`í˜„ìž¬ ìµœì € ì œì•ˆê°€ í˜¹ì€ ì‹œìž‘ê°€(${c}ëª¨ë¨¼íŠ¸)ë³´ë‹¤ ë‚®ì€ ê¸ˆì•¡ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.`:""},S=d=>{const m=d.target.value;_(m);const c=N(m);b(l=>({...l,bidAmount:c}))},T=async d=>{d.preventDefault();const m=N(i);if(m){b({bidAmount:m});return}if(h.trim().length===0){b({message:"ë©”ì‹œì§€ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”."});return}x(!0);try{await j({bidAmount:parseInt(i),message:h.trim()}),alert(`${i}ëª¨ë¨¼íŠ¸ë¡œ ${(t==null?void 0:t.type)==="bidding"?"ìž…ì°°":"ì œì•ˆ"}ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`),_(""),y(""),b({}),u()}catch(c){console.error("ìž…ì°° ë“±ë¡ ì˜¤ë¥˜:",c),alert("ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{x(!1)}},s=()=>{_(""),y(""),b({}),u()};o.useEffect(()=>{const d=m=>{m.key==="Escape"&&r&&(_(""),y(""),b({}),u())};return r&&document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[r,u]);const a=d=>{d.target===d.currentTarget&&s()};if(!r)return null;const g=p(),w=i&&!N(i)&&h.trim().length>0;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:a,children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",onClick:d=>d.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:(t==null?void 0:t.type)==="bidding"?"ðŸ’¸ ìž…ì°°í•˜ê¸°":"â° ì œì•ˆí•˜ê¸°"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:`p-3 rounded-lg mb-4 ${(t==null?void 0:t.type)==="bidding"?"bg-sky-50":"bg-emerald-50"}`,children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["í˜„ìž¬ ",(t==null?void 0:t.type)==="bidding"?"ìµœê³  ìž…ì°°ê°€":"ìµœì € ì œì•ˆê°€"]}),e.jsxs("div",{className:"font-semibold",children:[g,"ëª¨ë¨¼íŠ¸"]})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(t==null?void 0:t.type)==="bidding"?"ìž…ì°°í•  ëª¨ë¨¼íŠ¸":"ì œì•ˆí•  ëª¨ë¨¼íŠ¸"}),e.jsx("input",{type:"number",value:i,onChange:S,placeholder:`${g}`,min:"1",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.bidAmount?"border-red-500":"border-gray-300"}`}),f.bidAmount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.bidAmount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë©”ì‹œì§€"}),e.jsx("textarea",{value:h,onChange:d=>{y(d.target.value),d.target.value.trim()&&b(m=>({...m,message:""}))},placeholder:"ìž…ì°° ë©”ì‹œì§€ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”...",rows:"3",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.message?"border-red-500":"border-gray-300"}`}),f.message&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.message})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",disabled:!w||k,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors ${w&&!k?(t==null?void 0:t.type)==="bidding"?"bg-sky-500 hover:bg-sky-600":"bg-emerald-500 hover:bg-emerald-600":"bg-gray-300 cursor-not-allowed"}`,children:k?"ë“±ë¡ ì¤‘...":(t==null?void 0:t.type)==="bidding"?"ìž…ì°°í•˜ê¸°":"ì œì•ˆí•˜ê¸°"})]})]})]})})})}function L({bid:r,onClose:u,onUpdate:t}){const[n,j]=o.useState({type:"bidding",category:"",title:"",description:"",time_duration:"",schedule_info:"",start_price:"",deadline_at:"",status:"active"}),[i,_]=o.useState({}),[h,y]=o.useState(!1);o.useEffect(()=>{var s;if(r){const a=new Date(r.deadline_at),g=new Date(a.getTime()-a.getTimezoneOffset()*6e4).toISOString().slice(0,16);j({type:r.type||"bidding",category:r.category||"",title:r.title||"",description:r.description||"",time_duration:r.time_duration||"",schedule_info:r.schedule_info||"",start_price:((s=r.start_price)==null?void 0:s.toString())||"",deadline_at:g,status:r.status||"active"})}},[r]),o.useEffect(()=>{const s=a=>{a.key==="Escape"&&u()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[u]);const f=s=>{s.target===s.currentTarget&&u()},b=[{value:"ë©˜í† ë§",label:"ë©˜í† ë§"},{value:"ìŠ¤í„°ë””",label:"ìŠ¤í„°ë””"},{value:"ì†Œëª¨ìž„",label:"ì†Œëª¨ìž„"}],k=[{value:"30ë¶„",label:"30ë¶„"},{value:"1ì‹œê°„",label:"1ì‹œê°„"},{value:"1ì‹œê°„ 30ë¶„",label:"1ì‹œê°„ 30ë¶„"},{value:"2ì‹œê°„",label:"2ì‹œê°„"},{value:"2ì‹œê°„ 30ë¶„",label:"2ì‹œê°„ 30ë¶„"},{value:"3ì‹œê°„",label:"3ì‹œê°„"},{value:"ê¸°íƒ€",label:"ê¸°íƒ€"}],x=(s,a)=>{switch(s){case"category":return a?"":"ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";case"title":return a.trim()?a.trim().length>=5?"":"ì œëª©ì€ 5ìž ì´ìƒ ìž…ë ¥í•´ì£¼ì„¸ìš”.":"ê±°ëž˜ ì œëª©ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.";case"time_duration":return a?"":"ê±°ëž˜ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.";case"schedule_info":return a.trim()?"":"ì˜ˆìƒ ì¼ì •ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.";case"start_price":{const g=parseInt(a);return a&&g>0?"":"ì‹œìž‘ ê°€ê²©ì„ ì˜¬ë°”ë¥´ê²Œ ìž…ë ¥í•´ì£¼ì„¸ìš”. (1 ì´ìƒì˜ ìˆ«ìž)"}case"deadline_at":return a?new Date(a)>new Date?"":"ë§ˆê° ì‹œê°„ì€ í˜„ìž¬ ì‹œê°„ë³´ë‹¤ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.":"ë§ˆê° ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.";case"description":return"";default:return""}},p=s=>{const{name:a,value:g}=s.target;j(w=>({...w,[a]:g}));const C=x(a,g);_(w=>({...w,[a]:C}))},N=()=>{const s={};return Object.keys(n).forEach(a=>{if(a!=="type"&&a!=="status"&&a!=="description"){const g=x(a,n[a]);g&&(s[a]=g)}}),_(s),Object.keys(s).length===0},S=async s=>{if(s.preventDefault(),!!N()){y(!0);try{await t(n),alert("ìž…ì°° ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!"),u()}catch(a){console.error("Update error:",a),alert("ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{y(!1)}}},T=()=>Object.keys(n).every(s=>s==="type"||s==="status"||s==="description"?!0:!x(s,n[s]))&&Object.entries(n).every(([s,a])=>s==="description"?!0:a.toString().trim());return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:f,children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ìž…ì°° ì •ë³´ ìˆ˜ì •"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê±°ëž˜ ìœ í˜•"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>j(s=>({...s,type:"bidding"})),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium ${n.type==="bidding"?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"â° íŒë§¤ (ë¹„ë”©)"}),e.jsx("button",{type:"button",onClick:()=>j(s=>({...s,type:"reverse"})),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium ${n.type==="reverse"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"ðŸ’¸ êµ¬ë§¤ (ì—­ë¹„ë”©)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsxs("select",{name:"category",value:n.category,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.category?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”"}),b.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),i.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê±°ëž˜ ì œëª©"}),e.jsx("input",{type:"text",name:"title",value:n.title,onChange:p,placeholder:"ì˜ˆ: React ìž…ë¬¸ ë©˜í† ë§",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.title?"border-red-500":"border-gray-300"}`}),i.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìƒì„¸ ì„¤ëª… (ì„ íƒì‚¬í•­)"}),e.jsx("textarea",{name:"description",value:n.description,onChange:p,placeholder:"ìƒì„¸í•œ ì„¤ëª…ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.",rows:"3",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.description?"border-red-500":"border-gray-300"}`}),i.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê±°ëž˜ ì‹œê°„"}),e.jsxs("select",{name:"time_duration",value:n.time_duration,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.time_duration?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”"}),k.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),i.time_duration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.time_duration})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì˜ˆìƒ ì¼ì •"}),e.jsx("input",{type:"text",name:"schedule_info",value:n.schedule_info,onChange:p,placeholder:"ì˜ˆ: 7/4 19:00~22:00 ì‚¬ì´",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.schedule_info?"border-red-500":"border-gray-300"}`}),i.schedule_info&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.schedule_info})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì‹œìž‘ ê°€ê²© (ëª¨ë¨¼íŠ¸)"}),e.jsx("input",{type:"number",name:"start_price",value:n.start_price,onChange:p,placeholder:"ì˜ˆ: 5",min:"1",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.start_price?"border-red-500":"border-gray-300"}`}),i.start_price&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.start_price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìž…ì°° ë§ˆê° ì‹œê°„"}),e.jsx("input",{type:"datetime-local",name:"deadline_at",value:n.deadline_at,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${i.deadline_at?"border-red-500":"border-gray-300"}`}),i.deadline_at&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.deadline_at})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",disabled:!T()||h,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors ${T()&&!h?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`,children:h?"ìˆ˜ì • ì¤‘...":"ìˆ˜ì • ì™„ë£Œ"})]})]})]})})})}function K(){const{id:r}=B(),u=A(),[t,n]=o.useState(null),[j,i]=o.useState([]),[_,h]=o.useState(!0),[y,f]=o.useState(null),[b,k]=o.useState(null),{user:x}=O(),[p,N]=o.useState(!1),[S,T]=o.useState(!1),s=o.useCallback(async()=>{try{h(!0);let c=null;try{const{data:l,error:v}=await D.from("time_bids").select("*").eq("id",r).single();v&&v.code!=="PGRST116"?console.warn("Supabase ì—°ê²° ì˜¤ë¥˜, ë”ë¯¸ ë°ì´í„° ì‚¬ìš©:",v):c=l}catch(l){console.warn("Supabase ì—°ê²° ì˜¤ë¥˜, ë”ë¯¸ ë°ì´í„° ì‚¬ìš©:",l)}if(c)n(c);else{alert("ì‹¤ì œ ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ ë”ë¯¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.");const v=[{id:"550e8400-e29b-41d4-a716-446655440001",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430c8",type:"bidding",category:"ë©˜í† ë§",title:"React ìž…ë¬¸ ë„ì™€ë“œë¦½ë‹ˆë‹¤",description:"ì´ˆë³´ìžë¥¼ ìœ„í•œ React ê¸°ì´ˆ ê°•ì˜",time_duration:"1ì‹œê°„",schedule_info:"7/4 19:00~22:00 ì‚¬ì´",start_price:5,deadline_at:"2025-04-01T23:59:00",status:"active",created_at:"2025-03-25T10:30:00",updated_at:"2025-03-25T10:30:00"},{id:"550e8400-e29b-41d4-a716-446655440002",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430c9",type:"bidding",category:"ìŠ¤í„°ë””",title:"ë…¼ë¬¸ ì²¨ì‚­ 1:1 ì§€ë„",description:"í•™ìˆ  ë…¼ë¬¸ ìž‘ì„± ë° ì²¨ì‚­ ì§€ë„",time_duration:"2ì‹œê°„",schedule_info:"í‰ì¼ ì €ë… ì‹œê°„ëŒ€",start_price:10,deadline_at:"2025-04-02T20:00:00",status:"active",created_at:"2025-03-25T11:00:00",updated_at:"2025-03-25T11:00:00"},{id:"550e8400-e29b-41d4-a716-446655440003",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430ca",type:"bidding",category:"ì†Œëª¨ìž„",title:"ì±… ì½ëŠ” ëª¨ìž„ ì‹œê°„ ë‚˜ëˆ”",description:"ë…ì„œ í† ë¡  ë° ê°ìƒ ê³µìœ ",time_duration:"1ì‹œê°„ 30ë¶„",schedule_info:"ì£¼ë§ ì˜¤í›„",start_price:4,deadline_at:"2025-04-04T18:00:00",status:"active",created_at:"2025-03-25T12:00:00",updated_at:"2025-03-25T12:00:00"},{id:"550e8400-e29b-41d4-a716-446655440004",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430cb",type:"bidding",category:"ìŠ¤í„°ë””",title:"TOEIC Speaking ì‹¤ì „ ëª¨ì˜",description:"ì‹¤ì œ ì‹œí—˜ê³¼ ë™ì¼í•œ í™˜ê²½ì—ì„œ ëª¨ì˜ê³ ì‚¬",time_duration:"30ë¶„",schedule_info:"í‰ì¼ ì˜¤ì „",start_price:3,deadline_at:"2025-04-01T18:00:00",status:"active",created_at:"2025-03-25T13:00:00",updated_at:"2025-03-25T13:00:00"},{id:"550e8400-e29b-41d4-a716-446655440005",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430cc",type:"bidding",category:"ë©˜í† ë§",title:"ì½”ë”© ë©´ì ‘ ì¤€ë¹„ ë„ì™€ë“œë¦½ë‹ˆë‹¤",description:"ê°œë°œìž ì·¨ì—…ì„ ìœ„í•œ ì½”ë”© í…ŒìŠ¤íŠ¸ ë° ë©´ì ‘ ëŒ€ë¹„",time_duration:"1ì‹œê°„",schedule_info:"í‰ì¼ ì €ë… ë˜ëŠ” ì£¼ë§",start_price:8,deadline_at:"2025-04-03T22:00:00",status:"active",created_at:"2025-03-25T14:00:00",updated_at:"2025-03-25T14:00:00"},{id:"550e8400-e29b-41d4-a716-446655440006",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430cd",type:"reverse",category:"ìŠ¤í„°ë””",title:"ë¨¸ì‹ ëŸ¬ë‹ ìŠ¤í„°ë”” ë¦¬ë” êµ¬í•©ë‹ˆë‹¤",description:"ë¨¸ì‹ ëŸ¬ë‹ ê°œë…ë¶€í„° ì‹¤ìŠµê¹Œì§€ ì²´ê³„ì ì¸ ìŠ¤í„°ë””",time_duration:"ì£¼ 2íšŒ",schedule_info:"í™”ìš”ì¼, ëª©ìš”ì¼ ì €ë…",start_price:20,deadline_at:"2025-04-03T12:00:00",status:"active",created_at:"2025-03-25T15:00:00",updated_at:"2025-03-25T15:00:00"},{id:"550e8400-e29b-41d4-a716-446655440007",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430ce",type:"reverse",category:"ì†Œëª¨ìž„",title:"ëª…ìƒ ëª¨ìž„ ì§„í–‰ìž êµ¬í•´ìš”",description:"ë§ˆìŒì±™ê¹€ ëª…ìƒ ë° í˜¸í¡ë²• ì§€ë„",time_duration:"ë§¤ì£¼ ìˆ˜ìš”ì¼",schedule_info:"ìˆ˜ìš”ì¼ ì˜¤í›„ 7ì‹œ",start_price:7,deadline_at:"2025-04-05T15:00:00",status:"active",created_at:"2025-03-25T16:00:00",updated_at:"2025-03-25T16:00:00"},{id:"550e8400-e29b-41d4-a716-446655440008",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430cf",type:"reverse",category:"ë©˜í† ë§",title:"íŒŒì´ì¬ ê¸°ì´ˆ ê°€ë¥´ì³ì¤„ ë©˜í†  êµ¬í•¨",description:"í”„ë¡œê·¸ëž˜ë° ìž…ë¬¸ìžë¥¼ ìœ„í•œ íŒŒì´ì¬ ê¸°ì´ˆ",time_duration:"40ë¶„",schedule_info:"ì£¼ë§ ì˜¤ì „",start_price:10,deadline_at:"2025-04-06T10:00:00",status:"active",created_at:"2025-03-25T17:00:00",updated_at:"2025-03-25T17:00:00"},{id:"550e8400-e29b-41d4-a716-446655440009",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430d0",type:"reverse",category:"ì†Œëª¨ìž„",title:"ì„œìš¸ ë„ë³´ ì—¬í–‰ ê°™ì´í•´ìš”",description:"ì„œìš¸ ë„ì‹¬ ëª…ì†Œ íƒë°© ë° ì—­ì‚¬ ì´ì•¼ê¸°",time_duration:"2ì‹œê°„",schedule_info:"í† ìš”ì¼ ì˜¤í›„",start_price:12,deadline_at:"2025-04-08T13:00:00",status:"active",created_at:"2025-03-25T18:00:00",updated_at:"2025-03-25T18:00:00"},{id:"550e8400-e29b-41d4-a716-446655440010",user_id:"6ba7b810-9dad-11d1-80b4-00c04fd430d1",type:"reverse",category:"ìŠ¤í„°ë””",title:"ê²½ì œ ìŠ¤í„°ë”” ì£¼ë„ìž êµ¬í•©ë‹ˆë‹¤",description:"ê²½ì œí•™ ì›ë¡ ë¶€í„° ì‹œì‚¬ ê²½ì œê¹Œì§€",time_duration:"1ì‹œê°„ 30ë¶„",schedule_info:"ì¼ìš”ì¼ ì˜¤í›„",start_price:15,deadline_at:"2025-04-09T19:00:00",status:"active",created_at:"2025-03-25T19:00:00",updated_at:"2025-03-25T19:00:00"}].find(E=>E.id===r);if(!v){f("í•´ë‹¹ ìž…ì°°ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}n(v)}try{const{data:l,error:v}=await D.from("bid_participants").select("*").eq("bid_id",r).order("created_at",{ascending:!1});if(v&&v.code!=="PGRST116")console.warn("ì°¸ì—¬ìž ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:",v);else if(l&&(i(l),x)){const E=l.find($=>$.user_id===x.id);k(E)}}catch(l){console.warn("ì°¸ì—¬ìž ì •ë³´ ì¡°íšŒ ì—°ê²° ì˜¤ë¥˜:",l)}r==="550e8400-e29b-41d4-a716-446655440001"&&i([{id:"participant-1",bid_id:r,user_id:"dummy-user-1",offered_price:7,message:"Reactë¥¼ ì—´ì‹¬ížˆ ë°°ìš°ê³  ì‹¶ìŠµë‹ˆë‹¤!",created_at:"2025-03-25T14:30:00"},{id:"participant-2",bid_id:r,user_id:"dummy-user-2",offered_price:6,message:"ì¢‹ì€ ê¸°íšŒì¸ ê²ƒ ê°™ì•„ìš”",created_at:"2025-03-25T15:00:00"}])}catch(c){console.error("Error fetching bid details:",c),f("ìž…ì°° ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{h(!1)}},[r,x]);o.useEffect(()=>{r&&s()},[r,s]);const a=()=>{u(-1)},g=()=>{T(!0)},C=()=>{N(!0)},w=o.useCallback(async c=>{const{error:l}=await D.from("bid_participants").insert({bid_id:r,user_id:(x==null?void 0:x.id)||"dummy-user",offered_price:c.bidAmount,message:c.message});if(l)throw console.error("ìž…ì°° ë“±ë¡ ì˜¤ë¥˜:",l),l;s()},[r,x,s]),d=async c=>{console.log("ìˆ˜ì •ëœ ìž…ì°° ë°ì´í„°:",{id:t.id,...c,updated_at:new Date().toISOString()}),await new Promise(l=>setTimeout(l,1e3)),n(l=>({...l,...c}))};if(_)return e.jsx("div",{className:"p-4 font-noto",children:e.jsx("div",{className:"text-center text-gray-500",children:"ë¡œë”© ì¤‘..."})});if(y)return e.jsxs("div",{className:"p-4 font-noto",children:[e.jsx("div",{className:"text-center text-red-500 mb-4",children:y}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded-lg transition-colors bg-white border border-slate-200",children:"âœ•"})})]});if(!t)return e.jsxs("div",{className:"p-4 font-noto",children:[e.jsx("div",{className:"text-center text-gray-500 mb-4",children:"ìž…ì°° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded-lg transition-colors bg-white border border-slate-200",children:"âœ•"})})]});const m=x&&t.user_id===x.id;return e.jsxs(P,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${t.type==="bidding"?"bg-sky-100 text-sky-600":"bg-emerald-100 text-emerald-600"}`,children:t.type==="bidding"?"â° ì‹œê°„ íŒë§¤":"ðŸ’¸ ì‹œê°„ êµ¬ë§¤"}),e.jsx("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded-lg transition-colors bg-white border border-slate-200",children:"âœ•"})]}),e.jsxs("div",{className:`rounded-xl p-6 shadow-sm border mb-6 ${t.type==="bidding"?"bg-sky-50 border-sky-100":"bg-emerald-50 border-emerald-100"}`,children:[e.jsxs("div",{className:`text-sm font-medium mb-2 ${t.type==="bidding"?"text-sky-600":"text-emerald-600"}`,children:["[",t.category,"]"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:t.title}),t.description&&e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:t.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-600",children:"â± ì‹œê°„:"}),e.jsx("div",{className:"text-gray-800",children:t.time_duration})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-600",children:"ðŸ’° ì‹œìž‘ê°€:"}),e.jsxs("div",{className:"text-gray-800",children:[t.start_price,"ëª¨ë¨¼íŠ¸"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-600",children:"ðŸ“… ì¼ì •:"}),e.jsx("div",{className:"text-gray-800",children:t.schedule_info})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-600",children:"â° ë§ˆê°:"}),e.jsx("div",{className:"text-gray-800",children:new Date(t.deadline_at).toLocaleDateString("ko-KR",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsx("div",{className:"mb-6",children:m?e.jsx("button",{onClick:g,className:"w-full px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"âœï¸ ìˆ˜ì •í•˜ê¸°"}):b?e.jsx("button",{disabled:!0,className:"w-full px-6 py-3 text-white rounded-lg font-medium bg-gray-400 cursor-not-allowed opacity-60",children:t.type==="bidding"?"ðŸ’¸ ìž…ì°°í•˜ê¸°":"â° ì œì•ˆí•˜ê¸°"}):e.jsx("button",{onClick:C,className:`w-full px-6 py-3 text-white rounded-lg font-medium transition-colors ${t.type==="bidding"?"bg-sky-500 hover:bg-sky-600":"bg-emerald-500 hover:bg-emerald-600"}`,children:t.type==="bidding"?"ðŸ’¸ ìž…ì°°í•˜ê¸°":"â° ì œì•ˆí•˜ê¸°"})}),!m&&e.jsx(I,{participants:j,userParticipation:b}),e.jsx(R,{isOpen:p,onClose:()=>N(!1),bid:t,participants:j,onSubmit:w}),S&&e.jsx(L,{bid:t,onClose:()=>T(!1),onUpdate:d})]})}export{K as default};
